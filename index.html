<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>มือใหม่หัดสร้างตัว</title>
    <!-- 1. Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 2. Load LINE LIFF SDK -->
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <style>
        /* Using a custom font similar to the image, falling back to sans-serif */
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@400;700&display=swap');
        body {
            font-family: 'Kanit', 'Inter', sans-serif;
        }
        /* Custom class for the skewed banner effect */
        .skew-banner {
            transform: skewY(-2.5deg);
        }
        .skew-banner-content {
            transform: skewY(2.5deg);
        }
    </style>
</head>
<body class="bg-[#F0FDF4]"> <!-- Light green background -->

    <div class="container mx-auto max-w-lg p-6 min-h-screen">
        
        <!-- Header Section -->
        <div class="text-center mb-6">
            <p class="text-lg text-gray-600 mb-2">มาทำความเข้าใจกลุ่มลูกค้าแบบ</p>
            <h1 class="text-4xl font-bold text-[#4D7C0F]">“มือใหม่หัดสร้างตัว”</h1>
        </div>

        <!-- Icon and List Section -->
        <div class="flex flex-col sm:flex-row items-center mb-8">
            <div class="w-1/3 flex justify-center p-4">
                <!-- Using a placeholder for the icon -->
                <img src="https://placehold.co/120x120/f43f5e/ffffff?text=Icon&font=kanit" alt="Heart Icon" class="rounded-full">
            </div>
            <div class="w-2/3 pl-4">
                <ul class="list-disc list-outside text-lg text-gray-700 space-y-2">
                    <li>เป็นตัวของตัวเอง</li>
                    <li>เปิดรับสิ่งใหม่ๆ มิติและทิศทางความคิด</li>
                    <li>ความสะดวกรวดเร็วต้องมาก่อน</li>
                </ul>
            </div>
        </div>

        <!-- Problems Section -->
        <div class="mb-8">
            <h2 class="text-2xl font-bold text-center text-gray-800 mb-4">ปัญหาและข้อกังวล</h2>
            
            <!-- Skewed Banner 1 -->
            <div class="bg-[#84CC16] rounded-lg shadow-md p-4 mb-4 skew-banner">
                <div class="skew-banner-content">
                    <p class="text-center text-xl font-bold text-gray-900">“รายได้ยังไม่มาก แต่เจ็บป่วยทีเท่ากับค่าว่า</p>
                    <p class="text-center text-2xl font-bold text-[#BE123C]">#ของมันต้องมี”</p>
                </div>
            </div>

            <!-- Skewed Banner 2 -->
            <div class="bg-[#A3E635] rounded-lg shadow-md p-4 skew-banner">
                 <div class="skew-banner-content">
                    <p class="text-center text-xl font-bold text-gray-900">“เงินเก็บที่มีอาจจะไม่เพียงพอต่อการจ่ายค่ารักษาพยาบาลในปัจจุบัน”</p>
                </div>
            </div>
        </div>

        <!-- Solution Section -->
        <div class="text-center mb-8">
            <p class="text-lg text-gray-600 mb-2">เริ่มต้นบาลานซ์ชีวิตง่ายๆทั้งด้าน</p>
            <h1 class="text-4xl font-bold text-[#4D7C0F]">“การออมและสุขภาพ”</h1>
        </div>

        <!-- Action Buttons Section -->
        <div class="px-4"> <!-- Corrected class attribute -->
            <!-- Red Button -->
            <button id="openLiffButton" class="w-full bg-[#E11D48] text-white text-xl font-bold py-4 px-6 rounded-lg shadow-lg hover:bg-[#BE123C] transition duration-300">
                สนใจให้ติดต่อกลับ
            </button>

            <!-- Gray Button -->
            <button id="closeAndSendButton" class="w-full bg-gray-500 text-white text-lg font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-gray-600 transition duration-300 mt-4 flex items-center justify-center space-x-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425z"/>
                  <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z"/>
                </svg>
                <span>ข้ามไปผลิตภัณฑ์แนะนำเบื้องต้น</span>
            </button>

            <!-- Status Message Area -->
            <div id="status-message" class="text-center mt-4 text-red-600 font-semibold text-lg"></div>

        </div>
    </div>

    <script>
        // --- LIFF SCRIPT ---
        
        // Wait for the window to load before running LIFF functions
        window.onload = function() {
            mainLiff();
        };

        async function mainLiff() {
            const statusMessage = document.getElementById('status-message');
            statusMessage.textContent = 'Initializing LIFF...'; // Loading message
            statusMessage.className = 'text-center mt-4 text-gray-600 font-semibold text-lg'; // Set to neutral color

            try {
                // 3. Initialize LIFF
                // =================================================================
                // !!! IMPORTANT !!!
                // Replace 'YOUR_LIFF_ID' with your actual LIFF ID
                // =================================================================
                await liff.init({ liffId: '2007784462-bVgEReNG' });
                
                // After init, check if we're in LINE
                if (!liff.isInClient()) {
                    statusMessage.textContent = 'Ready (Testing in browser). Buttons will not work.';
                    statusMessage.className = 'text-center mt-4 text-blue-600 font-semibold text-lg';
                } else {
                    statusMessage.textContent = 'LIFF Ready.';
                    statusMessage.className = 'text-center mt-4 text-green-600 font-semibold text-lg';
                }
                
                // After init, set up button listeners
                setupButtonListeners();

            } catch (error) {
                console.error('LIFF Initialization failed:', error);
                // Show error message on the page
                statusMessage.textContent = 'LIFF Initialization Failed. Check LIFF ID and console.';
                statusMessage.className = 'text-center mt-4 text-red-600 font-semibold text-lg';
            }
        }

        function setupButtonListeners() {
            const statusMessage = document.getElementById('status-message');

            // 4. Red Button: Open another LIFF window
            document.getElementById('openLiffButton').addEventListener('click', () => {
                
                if (liff.isInClient()) {
                    // =================================================================
                    // !!! IMPORTANT !!!
                    // Replace with your *OTHER* LIFF App URL
                    // =================================================================
                    const dummyLiffUrl = 'https://liff.line.me/2007784462-NDJG41QV'; // Example dummy URL
                    
                    liff.openWindow({
                        url: dummyLiffUrl,
                        external: false // Set to true to open in external browser
                    });
                } else {
                    // Fallback for testing in a normal browser
                    console.log('Not in LIFF client. Would open: ' + dummyLiffUrl);
                    statusMessage.textContent = 'Error: Must be run inside the LINE app to open LIFF window.';
                    statusMessage.className = 'text-center mt-4 text-red-600 font-semibold text-lg';
                }
            });

            // 5. Gray Button: Send a carousel message and close the LIFF app
            document.getElementById('closeAndSendButton').addEventListener('click', async () => {
                
                const inClient = liff.isInClient();
                const apiAvailable = liff.isApiAvailable('sendMessages');
                
                console.log(`isInClient: ${inClient}, isApiAvailable('sendMessages'): ${apiAvailable}`);

                if (inClient && apiAvailable) {
                    try {
                        statusMessage.textContent = 'Sending message...';
                        statusMessage.className = 'text-center mt-4 text-blue-600 font-semibold text-lg';

                        // Define the carousel message
                        const carouselMessage = {
                            "type": "flex",
// ... existing code ... -->
                                "contents": [
                                    {
                                        "type": "bubble",
// ... existing code ... -->
                                        "footer": {
                                            "type": "box",
                                            "layout": "vertical",
                                            "contents": [
                                                { "type": "button", "action": { "type": "uri", "label": "ดูรายละเอียด", "uri": "https://line.me" } }
                                            ]
                                        }
                                    },
                                    {
                                        "type": "bubble",
// ... existing code ... -->
                                        "footer": {
                                            "type": "box",
                                            "layout": "vertical",
                                            "contents": [
                                                { "type": "button", "action": { "type": "uri", "label": "ดูรายละเอียด", "uri": "https://line.me" } }
                                            ]
                                        }
                                    }
                                ]
                            }
                        };

                        // Send the message
                        await liff.sendMessages([carouselMessage]);
                        
                        // Close the LIFF window
                        liff.closeWindow();

                    } catch (error) {
                        console.error('Failed to send message:', error);
                        statusMessage.textContent = 'ไม่สามารถส่งข้อความได้';
                        statusMessage.className = 'text-center mt-4 text-red-600 font-semibold text-lg';
                        // Still close the window even if sending fails, after a short delay
                        setTimeout(() => liff.closeWindow(), 2000); // Wait 2s to show error
                    }
                } else {
                    // Fallback for testing in a normal browser or if API is missing
                    console.log('Not in LIFF client or API not available. Would close window now.');
                    statusMessage.textContent = 'Error: Must be run inside the LINE app to send messages.';
                    statusMessage.className = 'text-center mt-4 text-red-600 font-semibold text-lg';
                }
            });
        }
    </script>

</body>
</html>

